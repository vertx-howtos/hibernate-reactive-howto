<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Vert.x and Hibernate Reactive How-to | Eclipse Vert.x how-to</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
    crossorigin="anonymous">
  <link rel="icon" type="image/svg+xml" href="assets/images/vertx-square.svg">
</head>

<body>


<nav class="navbar navbar-expand-lg sticky-top navbar-dark bg-purple mb-4 shadow-sm">
  <a class="navbar-brand" href="/">
    <img src="assets/images/vertx-square.svg" alt="Vert.x" width="40" height="40">
    &nbsp; Eclipse Vert.x how-to
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav"
    aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="https://vertx.io/docs/"><i class="fas fa-lg fa-drafting-compass"></i> Vert.x docs</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/"><i class="fab fa-lg fa-github"></i> Source
          code</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com//edit/master/README.adoc"><i
            class="far fa-lg fa-edit"></i>
          Edit this</a>
      </li>
    </ul>
  </div>
</nav>

<div class="container">

  <div class="row">
    <div class="col">
      <h1>Vert.x and Hibernate Reactive How-to</h1>
      <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#what-you-will-build">What you will build</a></li>
<li><a href="#what-you-need">What you need</a></li>
<li><a href="#create-a-project">Create a project</a></li>
<li><a href="#service-implementation">Service implementation</a>
<ul class="sectlevel2">
<li><a href="#product-entity">Product entity</a></li>
<li><a href="#hibernate-reactive-configuration">Hibernate Reactive configuration</a></li>
<li><a href="#application-startup">Application startup</a></li>
<li><a href="#verticle-setup">Verticle setup</a></li>
<li><a href="#request-handling-methods">Request handling methods</a></li>
</ul>
</li>
<li><a href="#running-the-application">Running the application</a></li>
<li><a href="#summary">Summary</a></li>
<li><a href="#see-also">See also</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This how-to shows how to build a Vert.x service with <a href="http://hibernate.org/reactive/">Hibernate Reactive</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-you-will-build">What you will build</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>You will build a HTTP service that can list, fetch and record products.</p>
</li>
<li>
<p>Database access will be made using the <a href="http://hibernate.org/reactive/">Hibernate Reactive APIs</a> and a <a href="https://vertx.io/docs/vertx-pg-client/java/">Reactive Vert.x SQL Client</a>.</p>
</li>
<li>
<p>To simplify the experience the database will be started as a PostgreSQL container with <a href="https://www.testcontainers.org">TestContainers</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-you-need">What you need</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>A text editor or IDE</p>
</li>
<li>
<p>Java 11 or higher</p>
</li>
<li>
<p>Apache Maven</p>
</li>
<li>
<p>Docker</p>
</li>
<li>
<p>HTTPie to make HTTP requests from the command-line</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-a-project">Create a project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is the content of the pom.xml file that you should be using:</p>
</div>
<div class="listingblock collapsed">
<div class="title"><code>pom.xml</code></div>
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="xml"><span style="color: #999999;font-weight: bold">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span style="color: #000080">&lt;project</span> <span style="color: #008080">xmlns=</span><span style="color: #d14">"http://maven.apache.org/POM/4.0.0"</span>
         <span style="color: #008080">xmlns:xsi=</span><span style="color: #d14">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span style="color: #008080">xsi:schemaLocation=</span><span style="color: #d14">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span style="color: #000080">&gt;</span>
  <span style="color: #000080">&lt;modelVersion&gt;</span>4.0.0<span style="color: #000080">&lt;/modelVersion&gt;</span>

  <span style="color: #000080">&lt;groupId&gt;</span>io.vertx.howtos<span style="color: #000080">&lt;/groupId&gt;</span>
  <span style="color: #000080">&lt;artifactId&gt;</span>hibernate-reactive-howto<span style="color: #000080">&lt;/artifactId&gt;</span>
  <span style="color: #000080">&lt;version&gt;</span>1.0.0-SNAPSHOT<span style="color: #000080">&lt;/version&gt;</span>

  <span style="color: #000080">&lt;properties&gt;</span>
    <span style="color: #000080">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span style="color: #000080">&lt;/project.build.sourceEncoding&gt;</span>
    <span style="color: #000080">&lt;maven-compiler-plugin.version&gt;</span>3.8.1<span style="color: #000080">&lt;/maven-compiler-plugin.version&gt;</span>
    <span style="color: #000080">&lt;exec-maven-plugin.version&gt;</span>3.0.0<span style="color: #000080">&lt;/exec-maven-plugin.version&gt;</span>
    <span style="color: #000080">&lt;main.verticle&gt;</span>io.vertx.howtos.hr.MainVerticle<span style="color: #000080">&lt;/main.verticle&gt;</span>
    <span style="color: #000080">&lt;mutiny-vertx.version&gt;</span>2.5.1<span style="color: #000080">&lt;/mutiny-vertx.version&gt;</span>
    <span style="color: #000080">&lt;hibernate-reactive-core.version&gt;</span>1.0.0.CR4<span style="color: #000080">&lt;/hibernate-reactive-core.version&gt;</span>
    <span style="color: #000080">&lt;logback-classic.version&gt;</span>1.2.3<span style="color: #000080">&lt;/logback-classic.version&gt;</span>
    <span style="color: #000080">&lt;testcontainers.version&gt;</span>1.15.3<span style="color: #000080">&lt;/testcontainers.version&gt;</span>
    <span style="color: #000080">&lt;jackson-databind.version&gt;</span>2.12.3<span style="color: #000080">&lt;/jackson-databind.version&gt;</span>
  <span style="color: #000080">&lt;/properties&gt;</span>

  <span style="color: #000080">&lt;dependencies&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>
      <span style="color: #000080">&lt;groupId&gt;</span>io.smallrye.reactive<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>smallrye-mutiny-vertx-core<span style="color: #000080">&lt;/artifactId&gt;</span>
      <span style="color: #000080">&lt;version&gt;</span>${mutiny-vertx.version}<span style="color: #000080">&lt;/version&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>
      <span style="color: #000080">&lt;groupId&gt;</span>io.smallrye.reactive<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>smallrye-mutiny-vertx-web<span style="color: #000080">&lt;/artifactId&gt;</span>
      <span style="color: #000080">&lt;version&gt;</span>${mutiny-vertx.version}<span style="color: #000080">&lt;/version&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>
      <span style="color: #000080">&lt;groupId&gt;</span>io.smallrye.reactive<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>smallrye-mutiny-vertx-pg-client<span style="color: #000080">&lt;/artifactId&gt;</span>
      <span style="color: #000080">&lt;version&gt;</span>${mutiny-vertx.version}<span style="color: #000080">&lt;/version&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>
      <span style="color: #000080">&lt;groupId&gt;</span>org.hibernate.reactive<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>hibernate-reactive-core<span style="color: #000080">&lt;/artifactId&gt;</span>
      <span style="color: #000080">&lt;version&gt;</span>${hibernate-reactive-core.version}<span style="color: #000080">&lt;/version&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>
      <span style="color: #000080">&lt;groupId&gt;</span>com.fasterxml.jackson.core<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>jackson-databind<span style="color: #000080">&lt;/artifactId&gt;</span>
      <span style="color: #000080">&lt;version&gt;</span>${jackson-databind.version}<span style="color: #000080">&lt;/version&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>
      <span style="color: #000080">&lt;groupId&gt;</span>ch.qos.logback<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>logback-classic<span style="color: #000080">&lt;/artifactId&gt;</span>
      <span style="color: #000080">&lt;version&gt;</span>${logback-classic.version}<span style="color: #000080">&lt;/version&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>
      <span style="color: #000080">&lt;groupId&gt;</span>org.testcontainers<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>postgresql<span style="color: #000080">&lt;/artifactId&gt;</span>
      <span style="color: #000080">&lt;version&gt;</span>${testcontainers.version}<span style="color: #000080">&lt;/version&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
  <span style="color: #000080">&lt;/dependencies&gt;</span>

  <span style="color: #000080">&lt;build&gt;</span>
    <span style="color: #000080">&lt;plugins&gt;</span>
      <span style="color: #000080">&lt;plugin&gt;</span>
        <span style="color: #000080">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color: #000080">&lt;/groupId&gt;</span>
        <span style="color: #000080">&lt;artifactId&gt;</span>maven-compiler-plugin<span style="color: #000080">&lt;/artifactId&gt;</span>
        <span style="color: #000080">&lt;version&gt;</span>${maven-compiler-plugin.version}<span style="color: #000080">&lt;/version&gt;</span>
        <span style="color: #000080">&lt;configuration&gt;</span>
          <span style="color: #000080">&lt;release&gt;</span>11<span style="color: #000080">&lt;/release&gt;</span>
        <span style="color: #000080">&lt;/configuration&gt;</span>
      <span style="color: #000080">&lt;/plugin&gt;</span>
      <span style="color: #000080">&lt;plugin&gt;</span>
        <span style="color: #000080">&lt;groupId&gt;</span>org.codehaus.mojo<span style="color: #000080">&lt;/groupId&gt;</span>
        <span style="color: #000080">&lt;artifactId&gt;</span>exec-maven-plugin<span style="color: #000080">&lt;/artifactId&gt;</span>
        <span style="color: #000080">&lt;version&gt;</span>${exec-maven-plugin.version}<span style="color: #000080">&lt;/version&gt;</span>
        <span style="color: #000080">&lt;configuration&gt;</span>
          <span style="color: #000080">&lt;mainClass&gt;</span>${main.verticle}<span style="color: #000080">&lt;/mainClass&gt;</span>
        <span style="color: #000080">&lt;/configuration&gt;</span>
      <span style="color: #000080">&lt;/plugin&gt;</span>
    <span style="color: #000080">&lt;/plugins&gt;</span>
  <span style="color: #000080">&lt;/build&gt;</span>

<span style="color: #000080">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The project uses <a href="https://github.com/smallrye/smallrye-reactive-utils">the Vert.x Mutiny bindings</a>, so you will use <a href="https://smallrye.io/smallrye-mutiny/">Mutiny</a> to compose asynchronous operations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="service-implementation">Service implementation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The service fits in 2 classes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>MainVerticle</code> contains the <code>main</code> method as well as the sole verticle, and</p>
</li>
<li>
<p><code>Product</code> is an entity to be managed with Hibernate.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="product-entity">Product entity</h3>
<div class="paragraph">
<p>Let&#8217;s start with the <code>Product</code> entity.
A <em>product</em> has a primary key, a name and a price:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="java"><span style="color: #000000;font-weight: bold">package</span> <span style="color: #555555">io.vertx.howtos.hr</span><span style="color: #000000;font-weight: bold">;</span>

<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">javax.persistence.Column</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">javax.persistence.Entity</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">javax.persistence.GeneratedValue</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">javax.persistence.Id</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">java.math.BigDecimal</span><span style="color: #000000;font-weight: bold">;</span>

<span style="color: #3c5d5d;font-weight: bold">@Entity</span>
<span style="color: #000000;font-weight: bold">public</span> <span style="color: #000000;font-weight: bold">class</span> <span style="color: #445588;font-weight: bold">Product</span> <span style="color: #000000;font-weight: bold">{</span>

  <span style="color: #3c5d5d;font-weight: bold">@Id</span>
  <span style="color: #3c5d5d;font-weight: bold">@GeneratedValue</span>
  <span style="color: #000000;font-weight: bold">private</span> <span style="color: #445588;font-weight: bold">Long</span> <span style="background-color: #f8f8f8">id</span><span style="color: #000000;font-weight: bold">;</span>

  <span style="color: #3c5d5d;font-weight: bold">@Column</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">unique</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #000000;font-weight: bold">true</span><span style="color: #000000;font-weight: bold">)</span>
  <span style="color: #000000;font-weight: bold">private</span> <span style="color: #445588;font-weight: bold">String</span> <span style="background-color: #f8f8f8">name</span><span style="color: #000000;font-weight: bold">;</span>

  <span style="color: #3c5d5d;font-weight: bold">@Column</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">nullable</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #000000;font-weight: bold">false</span><span style="color: #000000;font-weight: bold">)</span>
  <span style="color: #000000;font-weight: bold">private</span> <span style="color: #445588;font-weight: bold">BigDecimal</span> <span style="background-color: #f8f8f8">price</span><span style="color: #000000;font-weight: bold">;</span>

  <span style="color: #000000;font-weight: bold">public</span> <span style="color: #990000;font-weight: bold">Product</span><span style="color: #000000;font-weight: bold">()</span> <span style="color: #000000;font-weight: bold">{</span>
  <span style="color: #000000;font-weight: bold">}</span>

  <span style="color: #000000;font-weight: bold">public</span> <span style="color: #445588;font-weight: bold">Long</span> <span style="color: #990000;font-weight: bold">getId</span><span style="color: #000000;font-weight: bold">()</span> <span style="color: #000000;font-weight: bold">{</span>
    <span style="color: #000000;font-weight: bold">return</span> <span style="background-color: #f8f8f8">id</span><span style="color: #000000;font-weight: bold">;</span>
  <span style="color: #000000;font-weight: bold">}</span>

  <span style="color: #000000;font-weight: bold">public</span> <span style="color: #445588;font-weight: bold">void</span> <span style="color: #990000;font-weight: bold">setId</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #445588;font-weight: bold">Long</span> <span style="background-color: #f8f8f8">id</span><span style="color: #000000;font-weight: bold">)</span> <span style="color: #000000;font-weight: bold">{</span>
    <span style="color: #000000;font-weight: bold">this</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">id</span> <span style="color: #000000;font-weight: bold">=</span> <span style="background-color: #f8f8f8">id</span><span style="color: #000000;font-weight: bold">;</span>
  <span style="color: #000000;font-weight: bold">}</span>

  <span style="color: #000000;font-weight: bold">public</span> <span style="color: #445588;font-weight: bold">String</span> <span style="color: #990000;font-weight: bold">getName</span><span style="color: #000000;font-weight: bold">()</span> <span style="color: #000000;font-weight: bold">{</span>
    <span style="color: #000000;font-weight: bold">return</span> <span style="background-color: #f8f8f8">name</span><span style="color: #000000;font-weight: bold">;</span>
  <span style="color: #000000;font-weight: bold">}</span>

  <span style="color: #000000;font-weight: bold">public</span> <span style="color: #445588;font-weight: bold">void</span> <span style="color: #990000;font-weight: bold">setName</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #445588;font-weight: bold">String</span> <span style="background-color: #f8f8f8">name</span><span style="color: #000000;font-weight: bold">)</span> <span style="color: #000000;font-weight: bold">{</span>
    <span style="color: #000000;font-weight: bold">this</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">name</span> <span style="color: #000000;font-weight: bold">=</span> <span style="background-color: #f8f8f8">name</span><span style="color: #000000;font-weight: bold">;</span>
  <span style="color: #000000;font-weight: bold">}</span>

  <span style="color: #000000;font-weight: bold">public</span> <span style="color: #445588;font-weight: bold">BigDecimal</span> <span style="color: #990000;font-weight: bold">getPrice</span><span style="color: #000000;font-weight: bold">()</span> <span style="color: #000000;font-weight: bold">{</span>
    <span style="color: #000000;font-weight: bold">return</span> <span style="background-color: #f8f8f8">price</span><span style="color: #000000;font-weight: bold">;</span>
  <span style="color: #000000;font-weight: bold">}</span>

  <span style="color: #000000;font-weight: bold">public</span> <span style="color: #445588;font-weight: bold">void</span> <span style="color: #990000;font-weight: bold">setPrice</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #445588;font-weight: bold">BigDecimal</span> <span style="background-color: #f8f8f8">price</span><span style="color: #000000;font-weight: bold">)</span> <span style="color: #000000;font-weight: bold">{</span>
    <span style="color: #000000;font-weight: bold">this</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">price</span> <span style="color: #000000;font-weight: bold">=</span> <span style="background-color: #f8f8f8">price</span><span style="color: #000000;font-weight: bold">;</span>
  <span style="color: #000000;font-weight: bold">}</span>
<span style="color: #000000;font-weight: bold">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="hibernate-reactive-configuration">Hibernate Reactive configuration</h3>
<div class="paragraph">
<p>The configuration of <em>Hibernate Reactive</em> is not very different from <em>regular Hibernate</em>.</p>
</div>
<div class="paragraph">
<p>We need a <code>META-INF/persistence.xml</code> file as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="xml"><span style="color: #000080">&lt;persistence</span> <span style="color: #008080">xmlns=</span><span style="color: #d14">"http://java.sun.com/xml/ns/persistence"</span>
             <span style="color: #008080">xmlns:xsi=</span><span style="color: #d14">"http://www.w3.org/2001/XMLSchema-instance"</span>
             <span style="color: #008080">xsi:schemaLocation=</span><span style="color: #d14">"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"</span>
             <span style="color: #008080">version=</span><span style="color: #d14">"2.0"</span><span style="color: #000080">&gt;</span>

  <span style="color: #000080">&lt;persistence-unit</span> <span style="color: #008080">name=</span><span style="color: #d14">"pg-demo"</span><span style="color: #000080">&gt;</span>
    <span style="color: #000080">&lt;provider&gt;</span>org.hibernate.reactive.provider.ReactivePersistenceProvider<span style="color: #000080">&lt;/provider&gt;</span>  &lt;!--<b class="conum">(1)</b>--&gt;

    <span style="color: #000080">&lt;class&gt;</span>io.vertx.howtos.hr.Product<span style="color: #000080">&lt;/class&gt;</span> &lt;!--<b class="conum">(2)</b>--&gt;

    <span style="color: #000080">&lt;properties&gt;</span>

      <span style="color: #999988;font-style: italic">&lt;!-- PostgreSQL --&gt;</span>
      <span style="color: #000080">&lt;property</span> <span style="color: #008080">name=</span><span style="color: #d14">"javax.persistence.jdbc.url"</span>
                <span style="color: #008080">value=</span><span style="color: #d14">"jdbc:postgresql://localhost/postgres"</span><span style="color: #000080">/&gt;</span>  &lt;!--<b class="conum">(3)</b>--&gt;

      <span style="color: #999988;font-style: italic">&lt;!-- Credentials --&gt;</span>
      <span style="color: #000080">&lt;property</span> <span style="color: #008080">name=</span><span style="color: #d14">"javax.persistence.jdbc.user"</span>
                <span style="color: #008080">value=</span><span style="color: #d14">"postgres"</span><span style="color: #000080">/&gt;</span>
      <span style="color: #000080">&lt;property</span> <span style="color: #008080">name=</span><span style="color: #d14">"javax.persistence.jdbc.password"</span>
                <span style="color: #008080">value=</span><span style="color: #d14">"vertx-in-action"</span><span style="color: #000080">/&gt;</span>

      <span style="color: #999988;font-style: italic">&lt;!-- The Vert.x SQL Client connection pool size --&gt;</span>
      <span style="color: #000080">&lt;property</span> <span style="color: #008080">name=</span><span style="color: #d14">"hibernate.connection.pool_size"</span>
                <span style="color: #008080">value=</span><span style="color: #d14">"10"</span><span style="color: #000080">/&gt;</span>

      <span style="color: #999988;font-style: italic">&lt;!-- Automatic schema export --&gt;</span>
      <span style="color: #000080">&lt;property</span> <span style="color: #008080">name=</span><span style="color: #d14">"javax.persistence.schema-generation.database.action"</span>
                <span style="color: #008080">value=</span><span style="color: #d14">"drop-and-create"</span><span style="color: #000080">/&gt;</span>

      <span style="color: #999988;font-style: italic">&lt;!-- SQL statement logging --&gt;</span>
      <span style="color: #000080">&lt;property</span> <span style="color: #008080">name=</span><span style="color: #d14">"hibernate.show_sql"</span> <span style="color: #008080">value=</span><span style="color: #d14">"true"</span><span style="color: #000080">/&gt;</span>
      <span style="color: #000080">&lt;property</span> <span style="color: #008080">name=</span><span style="color: #d14">"hibernate.format_sql"</span> <span style="color: #008080">value=</span><span style="color: #d14">"true"</span><span style="color: #000080">/&gt;</span>
      <span style="color: #000080">&lt;property</span> <span style="color: #008080">name=</span><span style="color: #d14">"hibernate.highlight_sql"</span> <span style="color: #008080">value=</span><span style="color: #d14">"true"</span><span style="color: #000080">/&gt;</span>

    <span style="color: #000080">&lt;/properties&gt;</span>

  <span style="color: #000080">&lt;/persistence-unit&gt;</span>

<span style="color: #000080">&lt;/persistence&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify the reactive provider</p>
</li>
<li>
<p>Make sure <code>Product</code> will be a managed entity</p>
</li>
<li>
<p>This is a JDBC-style URL, but be assured that it won&#8217;t use JDBC!</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Hibernate Reactive selects the Vert.x reactive PostgreSQL driver because the <code>persistence.xml</code> file uses a PostgreSQL URL, and because <code>io.smallrye.reactive:smallrye-mutiny-vertx-pg-client</code> brings the driver implementation on the classpath.</p>
</div>
</div>
<div class="sect2">
<h3 id="application-startup">Application startup</h3>
<div class="paragraph">
<p>First of all, we start a PostgreSQL container with TestContainers in the <code>main</code> method, as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="java"><span style="color: #445588;font-weight: bold">PostgreSQLContainer</span><span style="color: #000000;font-weight: bold">&lt;?&gt;</span> <span style="background-color: #f8f8f8">postgreSQLContainer</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #000000;font-weight: bold">new</span> <span style="color: #445588;font-weight: bold">PostgreSQLContainer</span><span style="color: #000000;font-weight: bold">&lt;&gt;(</span><span style="color: #d14">"postgres:11-alpine"</span><span style="color: #000000;font-weight: bold">)</span>
  <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">withDatabaseName</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"postgres"</span><span style="color: #000000;font-weight: bold">)</span>
  <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">withUsername</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"postgres"</span><span style="color: #000000;font-weight: bold">)</span>
  <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">withPassword</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"vertx-in-action"</span><span style="color: #000000;font-weight: bold">);</span>

<span style="background-color: #f8f8f8">postgreSQLContainer</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">start</span><span style="color: #000000;font-weight: bold">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the container is available, we can create a <code>Vertx</code> context and deploy <code>MainVerticle</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="java"><span style="color: #445588;font-weight: bold">Vertx</span> <span style="background-color: #f8f8f8">vertx</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #445588;font-weight: bold">Vertx</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">vertx</span><span style="color: #000000;font-weight: bold">();</span>

<span style="color: #445588;font-weight: bold">DeploymentOptions</span> <span style="background-color: #f8f8f8">options</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #000000;font-weight: bold">new</span> <span style="color: #445588;font-weight: bold">DeploymentOptions</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">setConfig</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #000000;font-weight: bold">new</span> <span style="color: #445588;font-weight: bold">JsonObject</span><span style="color: #000000;font-weight: bold">()</span>
  <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">put</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"pgPort"</span><span style="color: #000000;font-weight: bold">,</span> <span style="background-color: #f8f8f8">postgreSQLContainer</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">getMappedPort</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #009999">5432</span><span style="color: #000000;font-weight: bold">)));</span> // <b class="conum">(1)</b>

<span style="background-color: #f8f8f8">vertx</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">deployVerticle</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #990000;font-weight: bold">MainVerticle:</span><span style="color: #000000;font-weight: bold">:</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">,</span> <span style="background-color: #f8f8f8">options</span><span style="color: #000000;font-weight: bold">).</span><span style="color: #008080">subscribe</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">with</span><span style="color: #000000;font-weight: bold">(</span>  // <b class="conum">(2)</b>
  <span style="background-color: #f8f8f8">ok</span> <span style="color: #000000;font-weight: bold">-&gt;</span> <span style="color: #000000;font-weight: bold">{</span>
    <span style="color: #445588;font-weight: bold">long</span> <span style="background-color: #f8f8f8">vertxTime</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #445588;font-weight: bold">System</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">currentTimeMillis</span><span style="color: #000000;font-weight: bold">();</span>
    <span style="background-color: #f8f8f8">logger</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">info</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"âœ… Deployment success"</span><span style="color: #000000;font-weight: bold">);</span>
    <span style="background-color: #f8f8f8">logger</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">info</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"ðŸ’¡ PostgreSQL container started in {}ms"</span><span style="color: #000000;font-weight: bold">,</span> <span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">tcTime</span> <span style="color: #000000;font-weight: bold">-</span> <span style="background-color: #f8f8f8">startTime</span><span style="color: #000000;font-weight: bold">));</span>
    <span style="background-color: #f8f8f8">logger</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">info</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"ðŸ’¡ Vert.x app started in {}ms"</span><span style="color: #000000;font-weight: bold">,</span> <span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">vertxTime</span> <span style="color: #000000;font-weight: bold">-</span> <span style="background-color: #f8f8f8">tcTime</span><span style="color: #000000;font-weight: bold">));</span>
  <span style="color: #000000;font-weight: bold">},</span>
  <span style="background-color: #f8f8f8">err</span> <span style="color: #000000;font-weight: bold">-&gt;</span> <span style="background-color: #f8f8f8">logger</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">error</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"ðŸ”¥ Deployment failure"</span><span style="color: #000000;font-weight: bold">,</span> <span style="background-color: #f8f8f8">err</span><span style="color: #000000;font-weight: bold">));</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We need to pass the PostgreSQL port that is mapped outside the container</p>
</li>
<li>
<p>Because we are using Mutiny, we need to subscribe to the deployment operation and actually trigger it, otherwise nothing happens</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="verticle-setup">Verticle setup</h3>
<div class="paragraph">
<p>The verticle in class <code>MainVerticle</code> uses the Mutiny bindings, so there is a Mutiny-friendly method to define the start behavior.
This method call <code>asyncStart</code> returns a <code>Uni&lt;Void&gt;</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="java"><span style="color: #000000;font-weight: bold">public</span> <span style="color: #000000;font-weight: bold">class</span> <span style="color: #445588;font-weight: bold">MainVerticle</span> <span style="color: #000000;font-weight: bold">extends</span> <span style="color: #445588;font-weight: bold">AbstractVerticle</span> <span style="color: #000000;font-weight: bold">{</span>

  <span style="color: #000000;font-weight: bold">private</span> <span style="color: #000000;font-weight: bold">static</span> <span style="color: #000000;font-weight: bold">final</span> <span style="color: #445588;font-weight: bold">Logger</span> <span style="background-color: #f8f8f8">logger</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #445588;font-weight: bold">LoggerFactory</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">getLogger</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #445588;font-weight: bold">MainVerticle</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">class</span><span style="color: #000000;font-weight: bold">);</span>
  <span style="color: #000000;font-weight: bold">private</span> <span style="color: #445588;font-weight: bold">Mutiny</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">SessionFactory</span> <span style="background-color: #f8f8f8">emf</span><span style="color: #000000;font-weight: bold">;</span>  // <b class="conum">(1)</b>

  <span style="color: #3c5d5d;font-weight: bold">@Override</span>
  <span style="color: #000000;font-weight: bold">public</span> <span style="color: #445588;font-weight: bold">Uni</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #445588;font-weight: bold">Void</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #990000;font-weight: bold">asyncStart</span><span style="color: #000000;font-weight: bold">()</span> <span style="color: #000000;font-weight: bold">{</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This is the Hibernate Reactive session factory with a Mutiny-based API</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>asyncStart</code> method needs to complete 2 operations:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>create an Hibernate Reactive session factory connected to the PostgreSQL database, and</p>
</li>
<li>
<p>start a HTTP server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We can do these operations simultaneously rather than in sequence.</p>
</div>
<div class="paragraph">
<p>The session factory is created using the following code, where we override the "JDBC" URL with the PostgreSQL port since it it dynamically allocated.
Also note that creating session factory is a blocking operation, so we offload it to a work thread.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="java"><span style="color: #445588;font-weight: bold">Uni</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #445588;font-weight: bold">Void</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="background-color: #f8f8f8">startHibernate</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #445588;font-weight: bold">Uni</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">createFrom</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">deferred</span><span style="color: #000000;font-weight: bold">(()</span> <span style="color: #000000;font-weight: bold">-&gt;</span> <span style="color: #000000;font-weight: bold">{</span>
  <span style="color: #445588;font-weight: bold">var</span> <span style="background-color: #f8f8f8">pgPort</span> <span style="color: #000000;font-weight: bold">=</span> <span style="background-color: #f8f8f8">config</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">getInteger</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"pgPort"</span><span style="color: #000000;font-weight: bold">,</span> <span style="color: #009999">5432</span><span style="color: #000000;font-weight: bold">);</span>
  <span style="color: #445588;font-weight: bold">var</span> <span style="background-color: #f8f8f8">props</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #445588;font-weight: bold">Map</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">of</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"javax.persistence.jdbc.url"</span><span style="color: #000000;font-weight: bold">,</span> <span style="color: #d14">"jdbc:postgresql://localhost:"</span> <span style="color: #000000;font-weight: bold">+</span> <span style="background-color: #f8f8f8">pgPort</span> <span style="color: #000000;font-weight: bold">+</span> <span style="color: #d14">"/postgres"</span><span style="color: #000000;font-weight: bold">);</span>  // <b class="conum">(1)</b>

  <span style="background-color: #f8f8f8">emf</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #445588;font-weight: bold">Persistence</span>
    <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">createEntityManagerFactory</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"pg-demo"</span><span style="color: #000000;font-weight: bold">,</span> <span style="background-color: #f8f8f8">props</span><span style="color: #000000;font-weight: bold">)</span>
    <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">unwrap</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #445588;font-weight: bold">Mutiny</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">SessionFactory</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">class</span><span style="color: #000000;font-weight: bold">);</span>

  <span style="color: #000000;font-weight: bold">return</span> <span style="color: #445588;font-weight: bold">Uni</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">createFrom</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">voidItem</span><span style="color: #000000;font-weight: bold">();</span>
<span style="color: #000000;font-weight: bold">});</span>

<span style="background-color: #f8f8f8">startHibernate</span> <span style="color: #000000;font-weight: bold">=</span> <span style="background-color: #f8f8f8">vertx</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">executeBlocking</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">startHibernate</span><span style="color: #000000;font-weight: bold">)</span>  // <b class="conum">(2)</b>
  <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">onItem</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">invoke</span><span style="color: #000000;font-weight: bold">(()</span> <span style="color: #000000;font-weight: bold">-&gt;</span> <span style="background-color: #f8f8f8">logger</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">info</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"âœ… Hibernate Reactive is ready"</span><span style="color: #000000;font-weight: bold">));</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Override the PostgreSQL port</p>
</li>
<li>
<p>Offload to a worker thread</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The HTTP API is defined using 3 routes: 1 to get all products, 1 to get a specific product, and 1 to create / record a new product:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="java"><span style="color: #445588;font-weight: bold">Router</span> <span style="background-color: #f8f8f8">router</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #445588;font-weight: bold">Router</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">router</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">vertx</span><span style="color: #000000;font-weight: bold">);</span>

<span style="color: #445588;font-weight: bold">BodyHandler</span> <span style="background-color: #f8f8f8">bodyHandler</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #445588;font-weight: bold">BodyHandler</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">create</span><span style="color: #000000;font-weight: bold">();</span>
<span style="background-color: #f8f8f8">router</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">post</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">handler</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #990000;font-weight: bold">bodyHandler:</span><span style="color: #000000;font-weight: bold">:</span><span style="background-color: #f8f8f8">handle</span><span style="color: #000000;font-weight: bold">);</span>

<span style="background-color: #f8f8f8">router</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">get</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"/products"</span><span style="color: #000000;font-weight: bold">).</span><span style="color: #008080">respond</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #000000;font-weight: bold">this</span><span style="color: #000000;font-weight: bold">::</span><span style="background-color: #f8f8f8">listProducts</span><span style="color: #000000;font-weight: bold">);</span>
<span style="background-color: #f8f8f8">router</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">get</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"/products/:id"</span><span style="color: #000000;font-weight: bold">).</span><span style="color: #008080">respond</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #000000;font-weight: bold">this</span><span style="color: #000000;font-weight: bold">::</span><span style="background-color: #f8f8f8">getProduct</span><span style="color: #000000;font-weight: bold">);</span>
<span style="background-color: #f8f8f8">router</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">post</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"/products"</span><span style="color: #000000;font-weight: bold">).</span><span style="color: #008080">respond</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #000000;font-weight: bold">this</span><span style="color: #000000;font-weight: bold">::</span><span style="background-color: #f8f8f8">createProduct</span><span style="color: #000000;font-weight: bold">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We can finally start the HTTP server then await for Hibernate Reactive to be ready:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="java"><span style="color: #445588;font-weight: bold">Uni</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #445588;font-weight: bold">HttpServer</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="background-color: #f8f8f8">startHttpServer</span> <span style="color: #000000;font-weight: bold">=</span> <span style="background-color: #f8f8f8">vertx</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">createHttpServer</span><span style="color: #000000;font-weight: bold">()</span>
  <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">requestHandler</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #990000;font-weight: bold">router:</span><span style="color: #000000;font-weight: bold">:</span><span style="background-color: #f8f8f8">handle</span><span style="color: #000000;font-weight: bold">)</span>
  <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">listen</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #009999">8080</span><span style="color: #000000;font-weight: bold">)</span>
  <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">onItem</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">invoke</span><span style="color: #000000;font-weight: bold">(()</span> <span style="color: #000000;font-weight: bold">-&gt;</span> <span style="background-color: #f8f8f8">logger</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">info</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"âœ… HTTP server listening on port 8080"</span><span style="color: #000000;font-weight: bold">));</span>

<span style="color: #000000;font-weight: bold">return</span> <span style="color: #445588;font-weight: bold">Uni</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">combine</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">all</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">unis</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">startHibernate</span><span style="color: #000000;font-weight: bold">,</span> <span style="background-color: #f8f8f8">startHttpServer</span><span style="color: #000000;font-weight: bold">).</span><span style="color: #008080">discardItems</span><span style="color: #000000;font-weight: bold">();</span>  // <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Join the 2 asynchronous operations, then discard the values and return a <code>Void</code> value, hence <code>Uni&lt;Void&gt;</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once the 2 operations have completed then the <code>asyncStart</code> method reports that the verticle deployment has completed.</p>
</div>
</div>
<div class="sect2">
<h3 id="request-handling-methods">Request handling methods</h3>
<div class="paragraph">
<p>The methods to handle HTTP requests use Hibernate Reactive for database access:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="java"><span style="color: #000000;font-weight: bold">private</span> <span style="color: #445588;font-weight: bold">Uni</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #445588;font-weight: bold">List</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #445588;font-weight: bold">Product</span><span style="color: #000000;font-weight: bold">&gt;&gt;</span> <span style="color: #990000;font-weight: bold">listProducts</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #445588;font-weight: bold">RoutingContext</span> <span style="background-color: #f8f8f8">ctx</span><span style="color: #000000;font-weight: bold">)</span> <span style="color: #000000;font-weight: bold">{</span>
  <span style="color: #000000;font-weight: bold">return</span> <span style="background-color: #f8f8f8">emf</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">withSession</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">session</span> <span style="color: #000000;font-weight: bold">-&gt;</span> <span style="background-color: #f8f8f8">session</span>
    <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">createQuery</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"from Product"</span><span style="color: #000000;font-weight: bold">,</span> <span style="color: #445588;font-weight: bold">Product</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">class</span><span style="color: #000000;font-weight: bold">)</span>
    <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">getResultList</span><span style="color: #000000;font-weight: bold">());</span>
<span style="color: #000000;font-weight: bold">}</span>

<span style="color: #000000;font-weight: bold">private</span> <span style="color: #445588;font-weight: bold">Uni</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #445588;font-weight: bold">Product</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #990000;font-weight: bold">getProduct</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #445588;font-weight: bold">RoutingContext</span> <span style="background-color: #f8f8f8">ctx</span><span style="color: #000000;font-weight: bold">)</span> <span style="color: #000000;font-weight: bold">{</span>
  <span style="color: #445588;font-weight: bold">long</span> <span style="background-color: #f8f8f8">id</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #445588;font-weight: bold">Long</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">parseLong</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">ctx</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">pathParam</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #d14">"id"</span><span style="color: #000000;font-weight: bold">));</span>
  <span style="color: #000000;font-weight: bold">return</span> <span style="background-color: #f8f8f8">emf</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">withSession</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">session</span> <span style="color: #000000;font-weight: bold">-&gt;</span> <span style="background-color: #f8f8f8">session</span>
    <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">find</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #445588;font-weight: bold">Product</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">class</span><span style="color: #000000;font-weight: bold">,</span> <span style="background-color: #f8f8f8">id</span><span style="color: #000000;font-weight: bold">))</span>
    <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">onItem</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">ifNull</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">continueWith</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #990000;font-weight: bold">Product:</span><span style="color: #000000;font-weight: bold">:</span><span style="color: #000000;font-weight: bold">new</span><span style="color: #000000;font-weight: bold">);</span>
<span style="color: #000000;font-weight: bold">}</span>

<span style="color: #000000;font-weight: bold">private</span> <span style="color: #445588;font-weight: bold">Uni</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="color: #445588;font-weight: bold">Product</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #990000;font-weight: bold">createProduct</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #445588;font-weight: bold">RoutingContext</span> <span style="background-color: #f8f8f8">ctx</span><span style="color: #000000;font-weight: bold">)</span> <span style="color: #000000;font-weight: bold">{</span>
  <span style="color: #445588;font-weight: bold">Product</span> <span style="background-color: #f8f8f8">product</span> <span style="color: #000000;font-weight: bold">=</span> <span style="background-color: #f8f8f8">ctx</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">getBodyAsJson</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">mapTo</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #445588;font-weight: bold">Product</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">class</span><span style="color: #000000;font-weight: bold">);</span>
  <span style="color: #000000;font-weight: bold">return</span> <span style="background-color: #f8f8f8">emf</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">withSession</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">session</span> <span style="color: #000000;font-weight: bold">-&gt;</span> <span style="background-color: #f8f8f8">session</span><span style="color: #000000;font-weight: bold">.</span>
    <span style="color: #990000;font-weight: bold">persist</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">product</span><span style="color: #000000;font-weight: bold">)</span>
    <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">chain</span><span style="color: #000000;font-weight: bold">(</span><span style="color: #990000;font-weight: bold">session:</span><span style="color: #000000;font-weight: bold">:</span><span style="background-color: #f8f8f8">flush</span><span style="color: #000000;font-weight: bold">)</span>
    <span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">replaceWith</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">product</span><span style="color: #000000;font-weight: bold">));</span>
<span style="color: #000000;font-weight: bold">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These are standard Hibernate operations (e.g., <code>persist</code>, <code>flush</code>, <code>find</code>) chained using Mutiny operators (e.g., <code>chain</code>, <code>onItem</code>, <code>replaceWith</code>).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-application">Running the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The application is self-contained as it starts a PostgreSQL container.
You can use Maven to compile and run the application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="text">$ mvn compile exec:java</code></pre>
</div>
</div>
<div class="paragraph">
<p>The logs should be similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="text">[INFO] --- exec-maven-plugin:3.0.0:java (default-cli) @ hibernate-reactive-howto ---
2021-05-18 13:54:35,570 INFO [io.vertx.howtos.hr.MainVerticle.main()] io.vertx.howtos.hr.MainVerticle - ðŸš€ Starting a PostgreSQL container
2021-05-18 13:54:39,430 DEBUG [io.vertx.howtos.hr.MainVerticle.main()] ðŸ³ [postgres:11-alpine] - Starting container: postgres:11-alpine
2021-05-18 13:54:39,431 DEBUG [io.vertx.howtos.hr.MainVerticle.main()] ðŸ³ [postgres:11-alpine] - Trying to start container: postgres:11-alpine (attempt 1/1)
2021-05-18 13:54:39,432 DEBUG [io.vertx.howtos.hr.MainVerticle.main()] ðŸ³ [postgres:11-alpine] - Starting container: postgres:11-alpine
2021-05-18 13:54:39,432 INFO [io.vertx.howtos.hr.MainVerticle.main()] ðŸ³ [postgres:11-alpine] - Creating container for image: postgres:11-alpine
2021-05-18 13:54:40,016 INFO [io.vertx.howtos.hr.MainVerticle.main()] ðŸ³ [postgres:11-alpine] - Starting container with ID: f538f59149d72ebec87382b09624240ca2faddcbc9c247a53575a537d1d7f045
2021-05-18 13:54:42,050 INFO [io.vertx.howtos.hr.MainVerticle.main()] ðŸ³ [postgres:11-alpine] - Container postgres:11-alpine is starting: f538f59149d72ebec87382b09624240ca2faddcbc9c247a53575a537d1d7f045
2021-05-18 13:54:43,918 INFO [io.vertx.howtos.hr.MainVerticle.main()] ðŸ³ [postgres:11-alpine] - Container postgres:11-alpine started in PT4.510869S
2021-05-18 13:54:43,918 INFO [io.vertx.howtos.hr.MainVerticle.main()] io.vertx.howtos.hr.MainVerticle - ðŸš€ Starting Vert.x
2021-05-18 13:54:44,342 INFO [vert.x-worker-thread-0] org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: pg-demo]
2021-05-18 13:54:44,408 INFO [vert.x-worker-thread-0] org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.31.Final
2021-05-18 13:54:44,581 INFO [vert.x-eventloop-thread-0] io.vertx.howtos.hr.MainVerticle - âœ… HTTP server listening on port 8080
2021-05-18 13:54:44,586 INFO [vert.x-worker-thread-0] org.hibernate.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2021-05-18 13:54:44,775 INFO [vert.x-worker-thread-0] org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2021-05-18 13:54:45,006 INFO [vert.x-worker-thread-0] o.h.reactive.provider.impl.ReactiveIntegrator - HRX000001: Hibernate Reactive Preview
2021-05-18 13:54:45,338 INFO [vert.x-worker-thread-0] o.h.reactive.pool.impl.DefaultSqlClientPool - HRX000011: SQL Client URL [jdbc:postgresql://localhost:55019/postgres]
2021-05-18 13:54:45,342 WARN [vert.x-worker-thread-0] io.vertx.core.impl.VertxImpl - You're already on a Vert.x context, are you sure you want to create a new Vertx instance?
2021-05-18 13:54:45,345 INFO [vert.x-worker-thread-0] o.h.reactive.pool.impl.DefaultSqlClientPool - HRX000012: Connection pool size: 10
[Hibernate]
    drop table if exists Product cascade
2021-05-18 13:54:45,521 WARN [vert.x-eventloop-thread-0] io.vertx.sqlclient.impl.SocketConnectionBase - Backend notice: severity='NOTICE', code='00000', message='table "product" does not exist, skipping', detail='null', hint='null', position='null', internalPosition='null', internalQuery='null', where='null', file='tablecmds.c', line='1060', routine='DropErrorMsgNonExistent', schema='null', table='null', column='null', dataType='null', constraint='null'
[Hibernate]
    drop sequence if exists hibernate_sequence
2021-05-18 13:54:45,527 WARN [vert.x-eventloop-thread-0] io.vertx.sqlclient.impl.SocketConnectionBase - Backend notice: severity='NOTICE', code='00000', message='sequence "hibernate_sequence" does not exist, skipping', detail='null', hint='null', position='null', internalPosition='null', internalQuery='null', where='null', file='tablecmds.c', line='1060', routine='DropErrorMsgNonExistent', schema='null', table='null', column='null', dataType='null', constraint='null'
[Hibernate]
    drop table if exists Product cascade
2021-05-18 13:54:45,537 WARN [vert.x-eventloop-thread-0] io.vertx.sqlclient.impl.SocketConnectionBase - Backend notice: severity='NOTICE', code='00000', message='table "product" does not exist, skipping', detail='null', hint='null', position='null', internalPosition='null', internalQuery='null', where='null', file='tablecmds.c', line='1060', routine='DropErrorMsgNonExistent', schema='null', table='null', column='null', dataType='null', constraint='null'
[Hibernate]
    drop sequence if exists hibernate_sequence
2021-05-18 13:54:45,540 WARN [vert.x-eventloop-thread-0] io.vertx.sqlclient.impl.SocketConnectionBase - Backend notice: severity='NOTICE', code='00000', message='sequence "hibernate_sequence" does not exist, skipping', detail='null', hint='null', position='null', internalPosition='null', internalQuery='null', where='null', file='tablecmds.c', line='1060', routine='DropErrorMsgNonExistent', schema='null', table='null', column='null', dataType='null', constraint='null'
[Hibernate]
    create sequence hibernate_sequence start 1 increment 1
[Hibernate]
    create table Product (
       id int8 not null,
        name varchar(255),
        price numeric(19, 2) not null,
        primary key (id)
    )
[Hibernate]
    alter table if exists Product
       add constraint UK_gxubutkbk5o2a6aakbe7q9kww unique (name)
2021-05-18 13:54:45,574 INFO [vert.x-eventloop-thread-0] io.vertx.howtos.hr.MainVerticle - âœ… Hibernate Reactive is ready
2021-05-18 13:54:45,576 INFO [vert.x-eventloop-thread-1] io.vertx.howtos.hr.MainVerticle - âœ… Deployment success
2021-05-18 13:54:45,576 INFO [vert.x-eventloop-thread-1] io.vertx.howtos.hr.MainVerticle - ðŸ’¡ PostgreSQL container started in 8349ms
2021-05-18 13:54:45,576 INFO [vert.x-eventloop-thread-1] io.vertx.howtos.hr.MainVerticle - ðŸ’¡ Vert.x app started in 1658ms</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can insert products:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="text">$ http :8080/products name="Baguette" price="1.20"
HTTP/1.1 200 OK
content-length: 39
content-type: application/json; charset=utf-8

{
    "id": 1,
    "name": "Baguette",
    "price": 1.2
}

$ http :8080/products name="Pain" price="1.40"
HTTP/1.1 200 OK
content-length: 35
content-type: application/json; charset=utf-8

{
    "id": 2,
    "name": "Pain",
    "price": 1.4
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can also list a specific product:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="text">$ http :8080/products/1
HTTP/1.1 200 OK
content-length: 39
content-type: application/json; charset=utf-8

{
    "id": 1,
    "name": "Baguette",
    "price": 1.2
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And we can of course list all products:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="text">$ http :8080/products
HTTP/1.1 200 OK
content-length: 77
content-type: application/json; charset=utf-8

[
    {
        "id": 1,
        "name": "Baguette",
        "price": 1.2
    },
    {
        "id": 2,
        "name": "Pain",
        "price": 1.4
    }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since we enabled Hibernate SQL logging, the application logs show the requests being executed such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="text">[Hibernate]
    select
        product0_.id as id1_0_0_,
        product0_.name as name2_0_0_,
        product0_.price as price3_0_0_
    from
        Product product0_
    where
        product0_.id=$1</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary">Summary</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>We built a Vert.x service with a HTTP API that accesses a database using a Vert.x reactive driver and Hibernate Reactive.</p>
</li>
<li>
<p>We used the familiar <em>object-relational mapping</em> programming model while still having end-to-end reactive requests processing.</p>
</li>
<li>
<p>TestContainers can be used to easily assemble self-contained demo applications.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also">See also</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/hibernate/hibernate-reactive">Hibernate Reactive</a></p>
</li>
<li>
<p><a href="https://smallrye.io/smallrye-mutiny/">Mutiny</a></p>
</li>
</ul>
</div>
</div>
</div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <!-- Sharingbutton Facebook -->
<a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https://vertx-howtos.github.io/hibernate-reactive-howto" target="_blank"
    rel="noopener" aria-label="">
    <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton Twitter -->
<a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Vert.x%20and%20Hibernate%20Reactive%20How-to&amp;url=https://vertx-howtos.github.io/hibernate-reactive-howto"
    target="_blank" rel="noopener" aria-label="">
    <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton E-Mail -->
<a class="resp-sharing-button__link" href="mailto:?subject=Vert.x%20and%20Hibernate%20Reactive%20How-to&amp;body=https://vertx-howtos.github.io/hibernate-reactive-howto" target="_self" rel="noopener"
    aria-label="">
    <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton LinkedIn -->
<a class="resp-sharing-button__link"
    href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://vertx-howtos.github.io/hibernate-reactive-howto&amp;title=Vert.x%20and%20Hibernate%20Reactive%20How-to&amp;summary=Vert.x%20and%20Hibernate%20Reactive%20How-to&amp;source=https://vertx-howtos.github.io/hibernate-reactive-howto"
    target="_blank" rel="noopener" aria-label="">
    <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton Reddit -->
<a class="resp-sharing-button__link"
    href="https://reddit.com/submit/?url=https://vertx-howtos.github.io/hibernate-reactive-howto&amp;resubmit=true&amp;title=Vert.x%20and%20Hibernate%20Reactive%20How-to" target="_blank" rel="noopener"
    aria-label="">
    <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton WhatsApp -->
<a class="resp-sharing-button__link" href="whatsapp://send?text=Vert.x%20and%20Hibernate%20Reactive%20How-to%20https://vertx-howtos.github.io/hibernate-reactive-howto" target="_blank" rel="noopener"
    aria-label="">
    <div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3 0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7 0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1 0-5.2 4.2-9.4 9.4-9.4 2.5 0 4.9 1 6.7 2.8 1.8 1.8 2.8 4.2 2.8 6.7-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.5.1-.6s.3-.3.4-.5c.2-.1.3-.3.4-.5.1-.2 0-.4 0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton Telegram -->
<a class="resp-sharing-button__link" href="https://telegram.me/share/url?text=Vert.x%20and%20Hibernate%20Reactive%20How-to&amp;url=https://vertx-howtos.github.io/hibernate-reactive-howto"
    target="_blank" rel="noopener" aria-label="">
    <div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M.707 8.475C.275 8.64 0 9.508 0 9.508s.284.867.718 1.03l5.09 1.897 1.986 6.38a1.102 1.102 0 0 0 1.75.527l2.96-2.41a.405.405 0 0 1 .494-.013l5.34 3.87a1.1 1.1 0 0 0 1.046.135 1.1 1.1 0 0 0 .682-.803l3.91-18.795A1.102 1.102 0 0 0 22.5.075L.706 8.475z" />
                </svg>
        </div>
    </div>
</a>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <hr>
      <p><small>Last published: 2021-06-23 00:59:22 +0000.</small></p>
    </div>
  </div>
</div>

<script>
  (function () {
    const blocks = document.getElementsByClassName("collapsed");
    for (let i = 0; i < blocks.length; i++) {
      const block = blocks[i];
      const blockWrapper = document.createElement("div");
      const details = document.createElement("details");
      const summary = document.createElement("summary");
      summary.innerHTML = "Details <em>(click to expand)</em>";
      details.appendChild(summary);
      details.appendChild(blockWrapper);
      block.parentNode.insertBefore(details, block);
      blockWrapper.appendChild(block);
    }
  })();
</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"></script>
</body>

</html>